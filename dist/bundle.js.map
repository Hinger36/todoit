{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/api.js","webpack:///./src/indexDB.js","webpack:///./src/interactive.js","webpack:///./src/main.js"],"names":["addEvent","ele","type","handle","addEventListener","attachEvent","call","ID","Number","Math","random","toString","split","Date","now","DB_NAME","DB_VERSION","DB_STORE_NAME","KEYPATH","INDEX","IndexName","keyPath","unique","db","deleteIndexDB","DBDeleteRequest","window","indexedDB","deleteDatabase","onerror","event","console","log","onsuccess","result","initDB","data","callback","openReq","open","target","errorCode","getAllDB","onupgradeneeded","oldVersion","deleteObjectStore","_createObjectStoreHandle","onblocked","store","createObjectStore","autoIncrement","_createIndex","index","createIndex","_createTransation","transaction","oncomplete","onabort","addDB","obj","objectStore","i","put","deleteDB","delete","getDB","arr","get","cursor","push","getAll","forEach","x","api","tags","tag","content","document","querySelectorAll","tagMenu","ul","querySelector","menu","icon","isShow","_css","top","transition","transform","_clickTag","conTag","srcElement","nodeName","_swapHandle","innerHTML","innerText","textContent","leftMenu","nav","lmenu","box","isHiden","left","menuBtn","filter","len","length","backgroundColor","elements","hasOwnProperty","display","element","styles","style","_getNode","node","parentNode","todolist","inter","init","time","getElementsByClassName","getNowTime","week","month","DBbase","showList","addTodo","weeks","listHandle","item","input","children","value","_addItem","Array","prototype","indexOf","task","day","todoitem","id","tick","status","unshift","inbox","getElementById","today","proTag","_sort","todayList","clearList","_indexImg","_createList","weekList","_tagList","list","li","createElement","p","em","appendChild","textDecoration","background","div","border","_deleteItem","_getTask","somelist","state","_refresh","sort","a","b","addDay","foo","setDate","getDate","getMonth","hours","getHours","minutes","getMinutes","getDay","taglist"],"mappings":"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EAAZ;AACA,MAAIC,UAAUN,IAAIO,UAAJ,EAAd;AACA,MAAI3D,OAAOoD,IAAIQ,MAAJ,EAAX;AACA,MAAI/D,OAAO,EAAX;AACA,UAAOG,IAAP;AACA,SAAK,CAAL;AACEA,aAAO,KAAP;AACA;AACF,SAAK,CAAL;AACEA,aAAO,KAAP;AACA;AACF,SAAK,CAAL;AACEA,aAAO,KAAP;AACA;AACF,SAAK,CAAL;AACEA,aAAO,KAAP;AACA;AACF,SAAK,CAAL;AACEA,aAAO,KAAP;AACA;AACF,SAAK,CAAL;AACEA,aAAO,KAAP;AACA;AACF,SAAK,CAAL;AACEA,aAAO,KAAP;AACA;AACF;AACE5F,cAAQC,GAAR,CAAY,OAAZ;AAvBF;AAyBA,SAAOwF,OAAO;AACZI,WAAOA,QAAQe,GADH;AAEZwC,WAAOA,QAAQ,GAAR,GAAcE,OAFT;AAGZ1D,UAAMA;AAHM,GAAd;AAKD;;AAGD,SAASgC,QAAT,GAAoB;AAClB,MAAI6B,UAAUnE,SAASb,MAAT,CAAgB,UAAUvG,GAAV,EAAe;AAC3C,WAAOA,IAAI0E,GAAJ,KAAYD,KAAKC,GAAxB;AACD,GAFa,CAAd;AAGA,SAAO6G,OAAP;AACD;AACD,SAASxD,KAAT,GAAiB;AACf,MAAIL,OAAO9C,SAAS4C,sBAAT,CAAgC,MAAhC,CAAX;AACA,OAAK,IAAI5D,IAAI,CAAb,EAAgBA,IAAI8D,KAAKjB,MAAzB,EAAiC7C,GAAjC,EAAsC;AACpC8D,SAAK9D,CAAL,EAAQuE,QAAR,CAAiB,CAAjB,EAAoBA,QAApB,CAA6B,CAA7B,EAAgCtC,SAAhC,GAA4C4B,WAAW7D,CAAX,EAAc8D,IAA1D;AACD;AACF;;AAED;;;AAGA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,I","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/main.js\");\n","//事件监听 兼容性封装\nfunction addEvent(ele, type, handle) {\n  if (ele.addEventListener) {\n    ele.addEventListener(type, handle, false);\n  } else if (ele.attachEvent) {\n    ele.attachEvent('on' + type, function () {\n      handle.call(this);\n    });\n  } else {\n    ele['on' + type] = handle;\n  }\n}\n//生成一个唯一数\nfunction ID() {\n  return Number(\n    Math.random().toString().split('.')[1]\n  ).toString(36) + Date.now().toString(36);\n}\n\nexport default {\n  addEvent,\n  ID,\n}","\n\n//数据库名称\nconst DB_NAME = 'todoit-indexedDB';\n//数据库版本号\nconst DB_VERSION = 2;\n//对象仓库名称\nconst DB_STORE_NAME = 'todolist';\nconst KEYPATH = 'tick';\n//索引\nconst INDEX = {\n  IndexName: 'id',\n  keyPath: 'id',\n  unique: false,\n}\nlet db;\n\n//从删库到跑路\nfunction deleteIndexDB() {\n  var DBDeleteRequest = window.indexedDB.deleteDatabase(DB_NAME);\n\n  DBDeleteRequest.onerror = function(event) {\n    console.log(\"Error deleting database.\");\n  };\n  \n  DBDeleteRequest.onsuccess = function(event) {\n    console.log(\"Database deleted successfully\");\n      \n    console.log(event.result); // should be undefined\n  };\n}\n\n\n//数据库初始化\nfunction initDB(data, callback) {\n  const openReq = window.indexedDB.open(DB_NAME, DB_VERSION);\n  \n  openReq.onerror = event => {\n    console.log(\"initDb:\", event.target.errorCode);\n  };\n  openReq.onsuccess = event => {\n    db = event.target.result;\n    getAllDB(data, callback);\n    console.log(\"initDb DONE\");\n  };\n  openReq.onupgradeneeded = event => {\n    db = event.target.result;\n    if (event.oldVersion) {\n      db.deleteObjectStore(DB_STORE_NAME);\n    }\n    _createObjectStoreHandle();\n\n    console.log('创建对象仓库成功');\n  };\n  openReq.onblocked = () => {\n    console.log('上一次的数据库连接还未关闭');\n  }\n}\n//创建对象仓库\nfunction _createObjectStoreHandle() {\n  const store = db.createObjectStore(DB_STORE_NAME, { keyPath: KEYPATH, autoIncrement: false});\n  _createIndex(store, INDEX);\n}\n//创建索引\nfunction _createIndex(store, index) {\n  store.createIndex(index.IndexName, index.keyPath, {unique: index.unique});\n}\n//建立事务\nfunction _createTransation() {\n  const transaction = db.transaction(DB_STORE_NAME, 'readwrite');\n  transaction.oncomplete = () => {\n    // console.log('事务完成');\n  }\n  transaction.onerror = () => {\n    console.log('事务出错');\n  }\n  transaction.onabort = () => {\n    console.log('事务中断');\n  }\n  return transaction;\n}\n/**\n * 添加数据\n * @param {需要存储的数据对象或者数组} obj \n */\nfunction addDB(obj, callback) {\n  let store = _createTransation().objectStore(DB_STORE_NAME);\n  for (let i in obj) {\n    store.put(obj[i])\n  \t\t  .onsuccess = () => {\n          callback();\n          // console.log('添加成功');\n        }\n    }\n} \n//删除一条数据\nfunction deleteDB(keyPath, callback) {\n  let store = _createTransation().objectStore(DB_STORE_NAME);\n  store.delete(keyPath)\n      .onsuccess = () => {\n        // console.log('删除成功');\n        callback();\n      }\n}\n\n//获取一条数据\nfunction getDB(keyPath, arr) {\n  let store = _createTransation().objectStore(DB_STORE_NAME);\n  store.get(keyPath)\n      .onsuccess = event => {\n         let cursor = event.target.result;\n         if (cursor) {\n           obj.push(cursor);\n         }\n    }\n}\n\n//获取全部数据\nfunction getAllDB(arr, callback) {\n  let store = _createTransation().objectStore(DB_STORE_NAME);\n  store.getAll()\n       .onsuccess = event => {\n         let cursor = event.target.result;\n         if (cursor) {\n           cursor.forEach(x => arr.push(x));\n           callback();\n         }\n    }\n}\n\nexport default {\n  initDB,\n  addDB,\n  deleteDB,\n  getDB,\n  getAllDB,\n  deleteIndexDB\n}\n\n","import api from './api';\n\nconst addEvent = api.addEvent;\nlet tags = {tag: ''};\nlet content = document.querySelectorAll('.right-box .content');\n\n// tagMenu(showList);\n// leftMenu();\n// menuBtn();\n\n//标签列表部分\nfunction tagMenu(callback) {\n  let ul = document.querySelector('#tag-list');\n  //标签栏\n  let menu = document.querySelector('.fixmenu');\n  //展开缩回icon箭头\n  let icon = menu.querySelector('.icon');\n  //是否显示标签页\n  let isShow = true;\n  addEvent(menu, 'click', function () {\n    if (isShow) {\n      //展开标签列表\n      _css(ul, {top: '-180px', transition: '0.6s'});\n      //箭头旋转\n      _css(icon, {transform: 'rotate(180deg)', transition: '0.6s'});\n    } else {\n      //隐藏列表\n      _css(ul, {top: '', transition: '0.6s'});\n      _css(icon, {transform: '', transition: '0.6s'});\n    }\n    isShow = !isShow;\n  });\n  _clickTag(callback);\n  //点击标签\n  function _clickTag(callback) {\n    let conTag = document.querySelector('#con-tag');\n    let tag = conTag.querySelector('.tag');\n    addEvent(ul, 'click', function (event) {\n      let target = event.target || event.srcElement;\n      if (target.nodeName === 'LI') {\n        _swapHandle(content, conTag);\n        tag.innerHTML = '<span>' + target.innerText + '</span>';\n        tags.tag = tag.textContent;\n        console.log(tags)\n        callback();\n      }    \n    });\n  }\n};\n//移动端响应式菜单开关\nfunction leftMenu() {\n  //切换菜单按钮\n  let nav = document.querySelector('.nav-toggle');\n  //左侧菜单栏\n  let lmenu = document.querySelector('.left-menu');\n  //右侧内容部分\n  let box = document.querySelector('.right-box');\n  //菜单是否隐藏\n  let isHiden = true;\n  addEvent(nav, 'click', function () {\n    if (isHiden) {\n      //点击展开菜单\n      _css(lmenu, {left: '0', transition: '0.6s'});\n    } else {\n      //点击隐藏菜单\n      _css(lmenu, {left: '', transition: '0.6s'});\n    }\n    isHiden = !isHiden;\n  });\n  //点击非菜单部分，隐藏菜单\n  addEvent(box, 'click', function () {\n    _css(lmenu, {left: '', transition: '0.6s'});\n  });\n}\n\nfunction menuBtn() {\n  let filter = document.querySelectorAll('#top-filters .filter');\n  for(let i = 0, len = filter.length; i < len - 1; i++) {\n    addEvent(filter[i], 'click', function () {\n      _swapHandle(content, content[i]);\n      for (let i = 0, len = filter.length; i < len - 1; i++) {\n        _css(filter[i], {backgroundColor: '#fafafa'});\n      }\n      _css(filter[i], {backgroundColor: '#fff'});\n    });\n  }  \n}\n\n\n/**\n * 显示元素列表中的目标元素，隐藏列表中非目标元素\n * @param {元素列表} elements \n * @param {目标元素} target \n */\nfunction _swapHandle(elements, target) {\n  //遍历元素列表\n  for (let i in elements) {\n    //过滤掉原型上的属性\n    if (!elements.hasOwnProperty(i)) {\n      continue;\n    }\n    _css(elements[i], {display: 'none'});\n  }\n  _css(target, {display: 'block'});\n}\n/**\n * 改变元素的style属性\n * 调用方式:_css($el, {\"font-size\": ..., \"background\": ...}；\n * @param {dom对象} element\n * @param {样式对象} styles \n */\nfunction _css(element, styles) {\n  for (let i in styles) {\n    element.style[i] = styles[i];\n  }\n}\n\nfunction _getNode(node) {\n  if(node.nodeName === 'LI') {\n    return node;\n  } else {\n    return _getNode(node.parentNode);\n  }\n}\n\nexport default {\n  tagMenu,\n  leftMenu,\n  menuBtn,\n  tags\n}\n","import DBbase from './indexDB';\nimport api from './api';\nimport inter from './interactive'\n\n//事件封装函数\nconst addEvent = api.addEvent;\n//随机数ID\nconst ID = api.ID;\nlet todolist = [];\nlet tags = inter.tags;\n\n\n\n(function init() {\n  let time = document.getElementsByClassName('time');\n  for (let i = 1, len = time.length; i < len; i++) {\n    time[i].innerHTML = getNowTime(i - 1).week + getNowTime(i - 1).month;     \n  }\n  time[0].innerHTML = getNowTime().week + getNowTime().month;\n  //DBbase.deleteIndexDB()\n  DBbase.initDB(todolist, showList);\n  addTodo();\n  weeks();\n  listHandle();\n  inter.tagMenu(showList);\n  inter.leftMenu();\n  inter.menuBtn();\n  console.log(tags);\n})();\n  \n\n//添加待办事项\nfunction addTodo(item) {\n  let content = document.getElementsByClassName('content');\n  //收件箱\n  addEvent(content[0], 'click', event => {\n    let target = event.target || event.srcElement;\n    if (target.nodeName === 'BUTTON') {\n      let input = target.parentNode.children[0];\n      if (!input.value) {\n        return;\n      }\n      _addItem(input.value);\n      input.value = '';\n    } else {\n      return;\n    }   \n  });\n  //今天\n  addEvent(content[1], 'click', event => {\n    let target = event.target || event.srcElement;\n    if (target.nodeName === 'BUTTON') {\n      let input = target.parentNode.children[0];\n      if (!input.value) {\n        return;\n      }\n      _addItem(input.value);\n      input.value = '';\n    } else {\n      return;\n    }   \n  });\n  //未来7天\n  addEvent(content[2], 'click', event => {\n    let target = event.target || event.srcElement;\n    if (target.nodeName === 'BUTTON') {\n      let input = target.parentNode.children[0];\n      let index = Array.prototype.indexOf.call(target.parentNode.parentNode.parentNode.children, target.parentNode.parentNode);\n      if (!input.value) {\n        return;\n      }\n      _addItem(input.value, index);\n      input.value = '';\n    } else {\n      return;\n    }   \n  });\n  addEvent(content[3], 'click', event => {\n    let target = event.target || event.srcElement;\n    if (target.nodeName === 'BUTTON') {\n      let input = target.parentNode.children[0];\n      if (!input.value) {\n        return;\n      }\n      _addItem(input.value, null, tags.tag);\n      input.value = '';\n    } else {\n      return;\n    }   \n  });\n}\n\n//添加一条任务\nfunction _addItem(task, day, tag) {\n   let todoitem = {\n    id: ID(),\n    tick : Date.now(),\n    task: task,\n    time: getNowTime(day).month,\n    //标记是否完成\n    status: false,\n    tag: tag,\n  };\n  todolist.unshift(todoitem);\n  DBbase.addDB(todolist, showList);\n}\n\n//显示数据\nfunction showList() {\n  let inbox = document.getElementById('inbox'); \n  let today = document.getElementById('today');\n  let weeks = document.getElementsByClassName('week');\n  let proTag = document.getElementById('pro-tag');\n  _sort();\n  let todayList = todolist.filter(ele => ele.time === getNowTime().month);\n  clearList();\n  if (!todolist.length) {\n    _indexImg(inbox);\n  }\n  if (!todayList.length) {\n    _indexImg(today);\n  }\n  _createList(inbox, todolist);\n  _createList(today, todayList);\n  for (let i = 0, len = weeks.length; i < len; i++) {\n    let week = weeks[i].children[2].children[0];\n    let weekList = todolist.filter(ele => ele.time === getNowTime(i).month);\n    _createList(week, weekList);\n  }\n  _createList(proTag, _tagList());\n}\n//创建数据列表\nfunction _createList(list, obj) {\n  obj.forEach(ele => {\n    let li = document.createElement('li');\n    let p = document.createElement('p');\n    let em = document.createElement('em');\n    p.innerHTML = '<span></span><i>' + ele.time + '</i>' + ele.task;\n    let item = list.appendChild(li);\n    item.appendChild(p);\n    item.appendChild(em);\n    //完成任务\n    if (ele.status) {\n      p.style.textDecoration = 'line-through';\n      p.children[0].style.background = 'url(./images/success.png) no-repeat';\n    }\n  });\n}\n//清空数据列表\nfunction clearList() {\n  let list = document.getElementsByClassName('todolist');\n  for (let i = 0, len = list.length; i < len; i++) {\n    list[i].innerHTML = '';\n  }\n}\n\n/**\n * 创建首页图片\n * @param {todolist列表dom元素} list \n */\nfunction _indexImg(list) {\n  let div = document.createElement('div');\n  let li = document.createElement('li');\n  let box = list.appendChild(li);\n  li.style.border = 'none';\n  box.appendChild(div).innerHTML = '<div></div><div>你的任务完成了！#TodolistZero</div>';\n}\n\nfunction listHandle() {\n  let ul = document.getElementsByClassName('todolist');\n  let inbox = document.getElementById('inbox'); \n  let today = document.getElementById('today');\n  let weeks = document.getElementsByClassName('week');\n  let proTag = document.getElementById('pro-tag');\n  addEvent(inbox, 'click', event => {\n    let target = event.target || event.srcElement;\n    //删除点击的那条任务\n    if (target.nodeName === 'EM') {\n      _deleteItem(todolist, target);\n    }\n    if (target.nodeName === 'P') {\n      _getTask(todolist, target);\n    }\n  });\n  addEvent(today, 'click', event => {\n    let target = event.target || event.srcElement;\n    let todayList = todolist.filter(ele => ele.time === getNowTime().month);\n    if (target.nodeName === 'EM') {\n      _deleteItem(todayList, target)\n    }\n    if (target.nodeName === 'P') {\n      _getTask(todayList, target);\n    }\n  });\n\n  for (let i = 0, len = weeks.length; i < len; i++) {\n    addEvent(ul[i + 2], 'click', event => {\n      let target = event.target || event.srcElement;\n      let weekList = todolist.filter(ele => ele.time === getNowTime(i).month);\n      if (target.nodeName === 'EM') {\n        _deleteItem(weekList, target)\n      }\n      if (target.nodeName === 'P') {\n        _getTask(weekList, target);\n      }\n    });\n  }\n  addEvent(proTag, 'click', event => {\n    let target = event.target || event.srcElement;\n    let todayList = todolist.filter(ele => ele.time === getNowTime().month);\n    if (target.nodeName === 'EM') {\n      _deleteItem(_tagList(), target)\n    }\n    if (target.nodeName === 'P') {\n      _getTask(_tagList(), target);\n    }\n  });\n}\n//完成一条任务\nfunction _getTask(somelist, target) {\n  let index = Array.prototype.indexOf.call(target.parentNode.parentNode.children, target.parentNode);\n  let state = true; \n  todolist.forEach( ele => {\n    if (ele.id === somelist[index].id) {\n      if (ele.status) {\n         state = false;\n      } else {\n        ele.status = true;\n        state = true;\n      }\n    }\n  });\n  if (state) {\n    DBbase.addDB(todolist, showList);\n  }  \n}\n//删除一条数据\nfunction _deleteItem(somelist, target) {\n  let index = Array.prototype.indexOf.call(target.parentNode.parentNode.children, target.parentNode);\n  DBbase.deleteDB(somelist[index].tick, _refresh);\n}\n//刷新数据\nfunction _refresh() {\n  todolist = [];\n  DBbase.getAllDB(todolist, showList);\n}\nfunction _sort() {\n  todolist.sort((a, b) => a.status - b.status);\n}\n  \n  \nfunction getNowTime(addDay) {\n  addDay = (addDay || 0);\n  let foo = new Date();\n  foo.setDate(foo.getDate() + addDay); \n  let month = foo.getMonth() + 1 + '月';\n  let day = foo.getDate() + '日';\n  let hours = foo.getHours();\n  let minutes = foo.getMinutes();\n  let week = foo.getDay();\n  let time = {};\n  switch(week) {\n  case 0:\n    week = '星期日';\n    break;\n  case 1:\n    week = '星期一';\n    break;\n  case 2:\n    week = '星期二';\n    break;\n  case 3:\n    week = '星期三';\n    break;\n  case 4:\n    week = '星期四';\n    break;\n  case 5:\n    week = '星期五';\n    break;\n  case 6:\n    week = '星期六';\n    break;\n  default: \n    console.log('error');\n  }\n  return time = {\n    month: month + day,\n    hours: hours + ':' + minutes,\n    week: week,\n  };\n}\n \n\nfunction _tagList() {        \n  let taglist = todolist.filter(function (ele) {\n    return ele.tag === tags.tag;\n  });\n  return taglist;\n}     \nfunction weeks() {\n  let week = document.getElementsByClassName('week');\n  for (let i = 2; i < week.length; i++) {\n    week[i].children[0].children[0].innerHTML = getNowTime(i).week;\n  }\n}\n\n/**\n * 页面交互模块\n */\n// function listMenu() {\n//   let content = document.querySelectorAll('.right-box .content');\n\n//   tagMenu(showList);\n//   leftMenu();\n//   menuBtn();\n\n//   //标签列表部分\n//   function tagMenu(callback) {\n//     let ul = document.querySelector('#tag-list');\n//     //标签栏\n//     let menu = document.querySelector('.fixmenu');\n//     //展开缩回icon箭头\n//     let icon = menu.querySelector('.icon');\n//     //是否显示标签页\n//     let isShow = true;\n//     addEvent(menu, 'click', function () {\n//       if (isShow) {\n//         //展开标签列表\n//         _css(ul, {top: '-180px', transition: '0.6s'});\n//         //箭头旋转\n//         _css(icon, {transform: 'rotate(180deg)', transition: '0.6s'});\n//       } else {\n//         //隐藏列表\n//         _css(ul, {top: '', transition: '0.6s'});\n//         _css(icon, {transform: '', transition: '0.6s'});\n//       }\n//       isShow = !isShow;\n//     });\n//     _clickTag(callback);\n//     //点击标签\n//     function _clickTag(callback) {\n//       let conTag = document.querySelector('#con-tag');\n//       let tag = conTag.querySelector('.tag');\n//       addEvent(ul, 'click', function (event) {\n//         let target = event.target || event.srcElement;\n//         if (target.nodeName === 'LI') {\n//           _swapHandle(content, conTag);\n//           tag.innerHTML = '<span>' + target.innerText + '</span>';\n//           tags = tag.textContent;\n//           callback();\n//         }    \n//       });\n//     }\n//   };\n//   //移动端响应式菜单开关\n//   function leftMenu() {\n//     //切换菜单按钮\n//     let nav = document.querySelector('.nav-toggle');\n//     //左侧菜单栏\n//     let lmenu = document.querySelector('.left-menu');\n//     //右侧内容部分\n//     let box = document.querySelector('.right-box');\n//     //菜单是否隐藏\n//     let isHiden = true;\n//     addEvent(nav, 'click', function () {\n//       if (isHiden) {\n//         //点击展开菜单\n//         _css(lmenu, {left: '0', transition: '0.6s'});\n//       } else {\n//         //点击隐藏菜单\n//         _css(lmenu, {left: '', transition: '0.6s'});\n//       }\n//       isHiden = !isHiden;\n//     });\n//     //点击非菜单部分，隐藏菜单\n//     addEvent(box, 'click', function () {\n//       _css(lmenu, {left: '', transition: '0.6s'});\n//     });\n//   }\n\n//   function menuBtn() {\n//     let filter = document.querySelectorAll('#top-filters .filter');\n//     for(let i = 0, len = filter.length; i < len - 1; i++) {\n//       addEvent(filter[i], 'click', function () {\n//         _swapHandle(content, content[i]);\n//         for (let i = 0, len = filter.length; i < len - 1; i++) {\n//           _css(filter[i], {backgroundColor: '#fafafa'});\n//         }\n//         _css(filter[i], {backgroundColor: '#fff'});\n//       });\n//     }  \n//   }\n  \n// }\n// /**\n//  * 显示元素列表中的目标元素，隐藏列表中非目标元素\n//  * @param {元素列表} elements \n//  * @param {目标元素} target \n//  */\n// function _swapHandle(elements, target) {\n//   //遍历元素列表\n//   for (let i in elements) {\n//     //过滤掉原型上的属性\n//     if (!elements.hasOwnProperty(i)) {\n//       continue;\n//     }\n//     _css(elements[i], {display: 'none'});\n//   }\n//   _css(target, {display: 'block'});\n// }\n// /**\n//  * 改变元素的style属性\n//  * 调用方式:_css($el, {\"font-size\": ..., \"background\": ...}；\n//  * @param {dom对象} element\n//  * @param {样式对象} styles \n//  */\n// function _css(element, styles) {\n//   for (let i in styles) {\n//     element.style[i] = styles[i];\n//   }\n// }\n\n// function _getNode(node) {\n//   if(node.nodeName === 'LI') {\n//     return node;\n//   } else {\n//     return _getNode(node.parentNode);\n//   }\n// }"],"sourceRoot":""}