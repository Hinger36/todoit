{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/api.js","webpack:///./src/indexDB.js","webpack:///./src/interactive.js","webpack:///./src/main.js","webpack:///./src/preload.js"],"names":["addEvent","ele","type","handle","addEventListener","attachEvent","call","ID","Number","Math","random","toString","split","Date","now","DB_NAME","DB_VERSION","DB_STORE_NAME","KEYPATH","INDEX","IndexName","keyPath","unique","db","deleteIndexDB","DBDeleteRequest","window","indexedDB","deleteDatabase","onerror","event","console","log","onsuccess","result","initDB","data","callback","openReq","open","target","errorCode","getAllDB","onupgradeneeded","oldVersion","deleteObjectStore","_createObjectStoreHandle","onblocked","store","createObjectStore","autoIncrement","_createIndex","index","createIndex","_createTransation","transaction","oncomplete","onabort","addDB","obj","objectStore","i","put","deleteDB","delete","getDB","arr","get","cursor","push","getAll","forEach","x","api","tags","tag","content","document","querySelectorAll","tagMenu","ul","querySelector","menu","icon","isShow","_css","top","transition","transform","_clickTag","conTag","srcElement","nodeName","_swapHandle","innerHTML","innerText","textContent","leftMenu","nav","lmenu","box","isHiden","left","menuBtn","filter","len","length","backgroundColor","elements","hasOwnProperty","display","element","styles","style","todolist","inter","images","init","DBbase","showList","time","addTodo","listHandle","load","e","today","weekDay","getNowTime","week","month","item","_inputEvent","input","_addItem","value","Array","prototype","indexOf","parentNode","children","_enter","key","which","keyCode","charCode","_handle","removeEventListener","task","day","todoitem","id","tick","status","unshift","inbox","getElementById","weeks","proTag","_sort","todayList","_clearList","_indexImg","_createList","weekList","_tagList","list","li","createElement","p","em","appendChild","textDecoration","background","getElementsByClassName","div","border","node","_getNode","_getTask","_deleteItem","parent","toLowerCase","somelist","state","_refresh","sort","a","b","addDay","foo","setDate","getDate","getMonth","hours","getHours","minutes","getMinutes","getDay","taglist","preload","timeout","count","success","isTimeout","timeId","src","image","Image","doload","setTimeout","onTimeout","onload","cleanEvent","clearTimeout"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/main.js\");\n","//事件监听 兼容性封装\nfunction addEvent(ele, type, handle) {\n  if (ele.addEventListener) {\n    ele.addEventListener(type, handle, false);\n  } else if (ele.attachEvent) {\n    ele.attachEvent('on' + type, function () {\n      handle.call(this);\n    });\n  } else {\n    ele['on' + type] = handle;\n  }\n}\n//生成一个唯一数\nfunction ID() {\n  return Number(\n    Math.random().toString().split('.')[1]\n  ).toString(36) + Date.now().toString(36);\n}\n\nexport default {\n  addEvent,\n  ID,\n}","\n\n//数据库名称\nconst DB_NAME = 'todoit-indexedDB';\n//数据库版本号\nconst DB_VERSION = 2;\n//对象仓库名称\nconst DB_STORE_NAME = 'todolist';\nconst KEYPATH = 'tick';\n//索引\nconst INDEX = {\n  IndexName: 'id',\n  keyPath: 'id',\n  unique: false,\n}\nlet db;\n\n//从删库到跑路\nfunction deleteIndexDB() {\n  var DBDeleteRequest = window.indexedDB.deleteDatabase(DB_NAME);\n\n  DBDeleteRequest.onerror = function(event) {\n    console.log(\"Error deleting database.\");\n  };\n  \n  DBDeleteRequest.onsuccess = function(event) {\n    console.log(\"Database deleted successfully\");\n      \n    console.log(event.result); // should be undefined\n  };\n}\n\n\n//数据库初始化\nfunction initDB(data, callback) {\n  const openReq = window.indexedDB.open(DB_NAME, DB_VERSION);\n  \n  openReq.onerror = event => {\n    console.log(\"initDb:\", event.target.errorCode);\n  };\n  openReq.onsuccess = event => {\n    db = event.target.result;\n    getAllDB(data, callback);\n    console.log(\"initDb DONE\");\n  };\n  openReq.onupgradeneeded = event => {\n    db = event.target.result;\n    if (event.oldVersion) {\n      db.deleteObjectStore(DB_STORE_NAME);\n    }\n    _createObjectStoreHandle();\n\n    console.log('创建对象仓库成功');\n  };\n  openReq.onblocked = () => {\n    console.log('上一次的数据库连接还未关闭');\n  }\n}\n//创建对象仓库\nfunction _createObjectStoreHandle() {\n  const store = db.createObjectStore(DB_STORE_NAME, { keyPath: KEYPATH, autoIncrement: false});\n  _createIndex(store, INDEX);\n}\n//创建索引\nfunction _createIndex(store, index) {\n  store.createIndex(index.IndexName, index.keyPath, {unique: index.unique});\n}\n//建立事务\nfunction _createTransation() {\n  const transaction = db.transaction(DB_STORE_NAME, 'readwrite');\n  transaction.oncomplete = () => {\n    // console.log('事务完成');\n  }\n  transaction.onerror = () => {\n    console.log('事务出错');\n  }\n  transaction.onabort = () => {\n    console.log('事务中断');\n  }\n  return transaction;\n}\n/**\n * 添加数据\n * @param {需要存储的数据对象或者数组} obj \n */\nfunction addDB(obj, callback) {\n  let store = _createTransation().objectStore(DB_STORE_NAME);\n  for (let i in obj) {\n    store.put(obj[i])\n  \t\t  .onsuccess = () => {\n          callback();\n          // console.log('添加成功');\n        }\n    }\n} \n//删除一条数据\nfunction deleteDB(keyPath, callback) {\n  let store = _createTransation().objectStore(DB_STORE_NAME);\n  store.delete(keyPath)\n      .onsuccess = () => {\n        // console.log('删除成功');\n        callback();\n      }\n}\n\n//获取一条数据\nfunction getDB(keyPath, arr) {\n  let store = _createTransation().objectStore(DB_STORE_NAME);\n  store.get(keyPath)\n      .onsuccess = event => {\n         let cursor = event.target.result;\n         if (cursor) {\n           obj.push(cursor);\n         }\n    }\n}\n\n//获取全部数据\nfunction getAllDB(arr, callback) {\n  let store = _createTransation().objectStore(DB_STORE_NAME);\n  store.getAll()\n       .onsuccess = event => {\n         let cursor = event.target.result;\n         if (cursor) {\n           cursor.forEach(x => arr.push(x));\n           callback();\n         }\n    }\n}\n\nexport default {\n  initDB,\n  addDB,\n  deleteDB,\n  getDB,\n  getAllDB,\n  deleteIndexDB\n}\n\n","import api from './api';\n\n/**\n * 页面交互模块\n */\nconst addEvent = api.addEvent;\nlet tags = {tag: ''};\nlet content = document.querySelectorAll('.right-box .content');\n\n//标签列表部分\nfunction tagMenu(callback) {\n  let ul = document.querySelector('#tag-list');\n  //标签栏\n  let menu = document.querySelector('.fixmenu');\n  //展开缩回icon箭头\n  let icon = menu.querySelector('.icon');\n  //是否显示标签页\n  let isShow = true;\n  addEvent(menu, 'click', function () {\n    if (isShow) {\n      //展开标签列表\n      _css(ul, {top: '-180px', transition: '0.6s'});\n      //箭头旋转\n      _css(icon, {transform: 'rotate(180deg)', transition: '0.6s'});\n    } else {\n      //隐藏列表\n      _css(ul, {top: '', transition: '0.6s'});\n      _css(icon, {transform: '', transition: '0.6s'});\n    }\n    isShow = !isShow;\n  });\n  _clickTag(callback);\n  //点击标签\n  function _clickTag(callback) {\n    let conTag = document.querySelector('#con-tag');\n    let tag = conTag.querySelector('.tag');\n    addEvent(ul, 'click', function (event) {\n      let target = event.target || event.srcElement;\n      if (target.nodeName === 'LI') {\n        _swapHandle(content, conTag);\n        tag.innerHTML = '<span>' + target.innerText + '</span>';\n        tags.tag = tag.textContent;\n        callback();\n      }    \n    });\n  }\n};\n\n\n//移动端响应式菜单开关\nfunction leftMenu() {\n  //切换菜单按钮\n  let nav = document.querySelector('.nav-toggle');\n  //左侧菜单栏\n  let lmenu = document.querySelector('.left-menu');\n  //右侧内容部分\n  let box = document.querySelector('.right-box');\n  //菜单是否隐藏\n  let isHiden = true;\n  addEvent(nav, 'click', function () {\n    if (isHiden) {\n      //点击展开菜单\n      _css(lmenu, {left: '0', transition: '0.6s'});\n    } else {\n      //点击隐藏菜单\n      _css(lmenu, {left: '', transition: '0.6s'});\n    }\n    isHiden = !isHiden;\n  });\n  //点击非菜单部分，隐藏菜单\n  addEvent(box, 'click', function () {\n    _css(lmenu, {left: '', transition: '0.6s'});\n  });\n}\n\n\n//切换功能，今天、未来7天、收信箱\nfunction menuBtn() {\n  let filter = document.querySelectorAll('#top-filters .filter');\n  for(let i = 0, len = filter.length; i < len - 1; i++) {\n    addEvent(filter[i], 'click', function () {\n      _swapHandle(content, content[i]);\n      for (let i = 0, len = filter.length; i < len - 1; i++) {\n        _css(filter[i], {backgroundColor: '#fafafa'});\n      }\n      _css(filter[i], {backgroundColor: '#fff'});\n    });\n  }  \n}\n\n/**\n * 显示元素列表中的目标元素，隐藏列表中非目标元素\n * @param {元素列表} elements \n * @param {目标元素} target \n */\nfunction _swapHandle(elements, target) {\n  //遍历元素列表\n  for (let i in elements) {\n    //过滤掉原型上的属性\n    if (!elements.hasOwnProperty(i)) {\n      continue;\n    }\n    _css(elements[i], {display: 'none'});\n  }\n  _css(target, {display: 'block'});\n}\n\n/**\n * 改变元素的style属性\n * 调用方式:_css($el, {\"font-size\": ..., \"background\": ...}；\n * @param {dom对象} element\n * @param {样式对象} styles \n */\nfunction _css(element, styles) {\n  for (let i in styles) {\n    element.style[i] = styles[i];\n  }\n}\n\nexport default {\n  tagMenu,\n  leftMenu,\n  menuBtn,\n  tags\n}\n","import DBbase from './indexDB';\nimport api from './api';\nimport inter from './interactive'\nimport load from './preload'\nimport { SSL_OP_MICROSOFT_BIG_SSLV3_BUFFER } from 'constants';\n\n//事件封装函数\nconst addEvent = api.addEvent;\n//随机数ID\nconst ID = api.ID;\nlet todolist = [];\nlet tags = inter.tags;\nlet images = [\n  './images/736b25b3212facd336d9bc0fd047c07e.png',\n  './images/delete.png',\n  './images/success.png',\n  './images/webwxgetmsgimg.png'\n];\n\n(function init() {\n  //初始化数据库\n  DBbase.initDB(todolist, showList);\n\n  time();\n  addTodo();\n  listHandle();\n  //预加载图片\n  load(images,function(e) {\n    console.log(e)\n  });\n\n  //交互部分\n  inter.tagMenu(showList);\n  inter.leftMenu();\n  inter.menuBtn();\n  \n})();\n\n//列表的时间\nfunction time() {\n  let today = document.querySelector('.time');\n  let weekDay = document.querySelectorAll('.week .tag');\n  //今天列表的时间\n  today.innerHTML = getNowTime().week + getNowTime().month;\n  //未来7天列表的时间\n  for (let i = 0, len = weekDay.length; i < len; i++) {\n    //render week time\n    weekDay[i].innerHTML = `\n      <span>${getNowTime(i).week}</span>\n      <span class=\"time\">${getNowTime(i).month}</span>`;\n  }\n}\n\n\n//添加待办事项\nfunction addTodo(item) {\n  let content = document.querySelectorAll('.content');\n  //收件箱\n  _inputEvent(content[0], function (input) {\n    _addItem(input.value);\n    input.value = '';\n  });\n  //今天\n  _inputEvent(content[1], function (input) {\n    _addItem(input.value);\n    input.value = '';\n  });\n  //未来7天\n  _inputEvent(content[2], function (input) {\n    let week = document.querySelectorAll('.week')\n    let index = Array.prototype.indexOf.call(week, input.parentNode.parentNode);\n    _addItem(input.value, index);\n    input.value = '';\n  });\n  _inputEvent(content[3], function (input) {\n    _addItem(input.value, null, tags.tag);\n    input.value = '';\n  });\n\n}\n//添加任务事件函数\nfunction _inputEvent(ele, callback) {\n  //点击添加按钮添加任务\n  addEvent(ele, 'click', event => {\n    let target = event.target || event.srcElement;\n    if (target.nodeName === 'BUTTON') {\n      let input = target.parentNode.children[0];\n      if (!input.value) {\n        return;\n      }\n      callback(input);\n    } \n    else {\n      return;\n    } \n  });\n  //回车键添加任务\n  _enter(ele, callback);\n}\n//回车键输入事件\nfunction _enter(ele, callback) {\n  //兼容safari不支持keyup\n  addEvent(ele, 'keydown', function (event) {\n    let key = event.which || event.keyCode || event.charCode;\n    if (key === 13) {\n      addEvent(ele, 'keyup', _handle(event));\n      ele.removeEventListener(\"keyup\", _handle, false);\n      \n      function _handle(event) {\n        let target = event.target || event.srcElement;\n        let key = event.which || event.keyCode || event.charCode;\n        if (target.nodeName === 'INPUT') {\n          /*Do something. 调用一些方法*/\n          if (!target.value) {\n            return;\n          }\n          callback(target);\n        }\n      }\n    }\n  });\n  \n}\n//添加一条任务\nfunction _addItem(task, day, tag) {\n   let todoitem = {\n    id: ID(),\n    tick : Date.now(),\n    task: task,\n    time: getNowTime(day).month,\n    //标记是否完成\n    status: false,\n    tag: tag,\n  };\n  todolist.unshift(todoitem);\n  DBbase.addDB(todolist, showList);\n}\n\n\n//显示数据\nfunction showList() {\n  let inbox = document.getElementById('inbox'); \n  let today = document.getElementById('today');\n  let weeks = document.querySelectorAll('.week .todolist')\n  let proTag = document.getElementById('pro-tag');\n  _sort();\n  let todayList = todolist.filter(ele => ele.time === getNowTime().month);\n  _clearList();\n  //如果收信箱TODO列表为空\n  if (!todolist.length) {\n    //创建首页图片\n    _indexImg(inbox);\n  }\n  //如果今天TODO列表为空\n  if (!todayList.length) {\n    _indexImg(today);\n  }\n  //创建列表\n  _createList(inbox, todolist);\n  _createList(today, todayList);\n\n  for (let i = 0, len = weeks.length; i < len; i++) {\n    let weekList = todolist.filter(ele => ele.time === getNowTime(i).month);\n    //创建未来7天的TODO列表\n    _createList(weeks[i], weekList);\n  }\n  //创建标签列表\n  _createList(proTag, _tagList());\n}\n//创建数据列表\nfunction _createList(list, obj) {\n  obj.forEach(ele => {\n    let li = document.createElement('li');\n    let p = document.createElement('p');\n    let em = document.createElement('em');\n    p.innerHTML = '<span></span><i>' + ele.time + '</i>' + ele.task;\n    let item = list.appendChild(li);\n    item.appendChild(p);\n    item.appendChild(em);\n    //完成任务\n    if (ele.status) {\n      //完成的任务添加删除线\n      p.style.textDecoration = 'line-through';\n      p.children[0].style.background = 'url(./images/success.png) no-repeat';\n    }\n  });\n}\n//清空数据列表\nfunction _clearList() {\n  let list = document.getElementsByClassName('todolist');\n  for (let i = 0, len = list.length; i < len; i++) {\n    list[i].innerHTML = '';\n  }\n}\n\n\n/**\n * 创建首页图片\n * @param {todolist列表dom元素} list \n */\nfunction _indexImg(list) {\n  let div = document.createElement('div');\n  let li = document.createElement('li');\n  let box = list.appendChild(li);\n  li.style.border = 'none';\n  box.appendChild(div).innerHTML = '<div></div><div>你的任务完成了！#TodolistZero</div>';\n}\n\n//TODO列表操作部分\nfunction listHandle() {\n  let ul = document.getElementsByClassName('todolist');\n  let inbox = document.getElementById('inbox'); \n  let today = document.getElementById('today');\n  let weeks = document.getElementsByClassName('week');\n  let proTag = document.getElementById('pro-tag');\n  addEvent(inbox, 'click', event => {\n    let target = event.target || event.srcElement;\n    //获取点击的li\n    let node = _getNode(target, 'li', 'ul');\n    //完成任务\n    _getTask(todolist, node);\n    //删除点击的那条任务\n    if (target.nodeName === 'EM') {\n      _deleteItem(todolist, node);\n    }\n  });\n  addEvent(today, 'click', event => {\n    let target = event.target || event.srcElement;\n    let todayList = todolist.filter(ele => ele.time === getNowTime().month);\n    //获取点击的li\n    let node = _getNode(target, 'li', 'ul');\n    _getTask(todayList, node);\n    //删除任务\n    if (target.nodeName === 'EM') {\n      _deleteItem(todayList, node)\n    } \n    \n  });\n\n  for (let i = 0, len = weeks.length; i < len; i++) {\n    addEvent(ul[i + 2], 'click', event => {\n      let target = event.target || event.srcElement;\n      //未来7天中某一天的todo列表\n      let weekList = todolist.filter(ele => ele.time === getNowTime(i).month);\n      let node = _getNode(target, 'li', 'ul');\n      _getTask(weekList, node);\n      if (target.nodeName === 'EM') {\n        _deleteItem(weekList, node)\n      } \n    });\n  }\n  addEvent(proTag, 'click', event => {\n    let target = event.target || event.srcElement;\n    let todayList = todolist.filter(ele => ele.time === getNowTime().month);\n    let node = _getNode(target, 'li', 'ul');\n    _getTask(_tagList(), node);\n    if (target.nodeName === 'EM') {\n      _deleteItem(_tagList(), node)\n    } \n  });\n}\n//返回目标节点，用于事件代理，使目标节点不受子节点影响\nfunction _getNode(node, target, parent) {\n  if (node.nodeName.toLowerCase() === parent) {\n    return;\n  }\n  if(node.nodeName.toLowerCase() === target) {\n    return node;\n  } else {\n    return _getNode(node.parentNode, target, parent);\n  }\n}\n//完成一条任务\nfunction _getTask(somelist, target) {\n  if (!target) {\n    return;\n  }\n  //返回列表元素的位置\n  let index = Array.prototype.indexOf.call(target.parentNode.children, target);\n  let state = true; \n  todolist.forEach( ele => {\n    if (ele.id === somelist[index].id) {\n      if (ele.status) {\n         state = false;\n      } else {\n        ele.status = true;\n        state = true;\n      }\n    }\n  });\n  if (state) {\n    DBbase.addDB(todolist, showList);\n  }  \n}\n//删除一条数据\nfunction _deleteItem(somelist, target) {\n  let index = Array.prototype.indexOf.call(target.parentNode.children, target);\n  DBbase.deleteDB(somelist[index].tick, _refresh);\n}\n//刷新数据\nfunction _refresh() {\n  todolist = [];\n  DBbase.getAllDB(todolist, showList);\n}\n//列表排序 已完成的排后面\nfunction _sort() {\n  todolist.sort((a, b) => a.status - b.status);\n}\n  \n  \nfunction getNowTime(addDay) {\n  addDay = (addDay || 0);\n  let foo = new Date();\n  foo.setDate(foo.getDate() + addDay); \n  let month = foo.getMonth() + 1 + '月';\n  let day = foo.getDate() + '日';\n  let hours = foo.getHours();\n  let minutes = foo.getMinutes();\n  let week = foo.getDay();\n  let time = {};\n  let weeks = ['星期日', '星期一', '星期二', '星期三', '星期四', '星期五', '星期六'];\n  return time = {\n    month: month + day,\n    hours: hours + ':' + minutes,\n    week: weeks[week],\n  };\n}\n\n//标签列表\nfunction _tagList() {        \n  let taglist = todolist.filter(function (ele) {\n    return ele.tag === tags.tag;\n  });\n  return taglist;\n}\n\n","/**\n * 图片预加载函数\n * @param {图片数组或对象} images \n * @param {全部图片加载成功的回调函数} callback \n * @param {加载超时的时间} timeout \n */\nfunction preload(images, callback, timeout) {\n  //加载完成的图片计数器\n  let count = 0;\n  //全部图片加载完成\n  let success = true;\n  //是否加载超时\n  let isTimeout = false;\n  //超时定时器ID\n  let timeId = 0;\n\n  for (let key in images) {\n    //过滤掉继承的属性\n    if (!images.hasOwnProperty(key)) {\n      continue;\n    }\n    let item = images[key];\n    if (typeof(item) === 'string') {\n      item = {src: item}\n    } else {\n      continue;\n    }\n    count++;\n    //设置图片元素的img，是一个Image对象\n    item.image = new Image();\n    doload(item);\n    \n  }\n  if (timeout) {\n    timeId = setTimeout(onTimeout, timeout);\n  }\n  function doload(item) {\n    item.status = 'loading';\n\n    item.image.onload = function () {\n      item.status = 'loaded';\n      success = success && true;\n      cleanEvent();\n    };\n    item.image.onerror = function () {\n      item.status = 'error';\n      success = false;\n      cleanEvent()\n    };\n    item.image.src = item.src;\n    //清除绑定的事件\n    function cleanEvent() {\n      item.image.onload = item.image.onerror = null;\n  \n      if (!--count && !isTimeout) {\n        clearTimeout(timeId);\n        callback(true);\n      }    \n    }\n  }\n  //超时函数  \n  function onTimeout() {\n    isTimeout = true;\n    callback(false);\n  }\n}\nexport default preload;"],"sourceRoot":""}